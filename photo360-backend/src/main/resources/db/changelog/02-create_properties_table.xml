<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <preConditions>
        <runningAs username="photo_user_db_360"/>
    </preConditions>

    <changeSet id="2023-08-29T16:33:32" author="jczajka">

        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="system_properties"/>
            </not>
        </preConditions>

        <comment>Create table to store system properties.</comment>

        <createTable tableName="system_properties">

            <column name="property_key" type="text">
                <constraints nullable="false" unique="true" primaryKey="true"/>
            </column>

            <column name="value" type="text">
                <constraints nullable="false" unique="true"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="2023-08-29T17:33:32" author="jczajka">

        <preConditions onFail="MARK_RAN">
            <tableExists tableName="system_properties"/>
        </preConditions>

        <comment>Insert public key property.</comment>

        <insert tableName="system_properties">
            <column name="property_key">PUBLIC_API_KEY</column>
            <column name="value">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCJpt3Bs6fwMc2S7h5cpIP6nkG9DsISp0MfKTpwtt31/a1ZF2+Pv8I0f64CIcBj4GPWP4PWWe9nI4WSUKkf5CdxT6sUh4toHvBemfQiSw3sCaHfgL0WBrdqhqIxYUwsedb9ZuCXRp6acmbvqttNI2r5V8rsuT0nTDYCnVTl5OgnQIDAQAB</column>
        </insert>

    </changeSet>

    <changeSet id="2023-08-29T18:32:32" author="jczajka">

        <preConditions onFail="MARK_RAN">
            <tableExists tableName="system_properties"/>
        </preConditions>

        <comment>Insert max login attempt value.</comment>

        <insert tableName="system_properties">
            <column name="property_key">MAX_LOGIN_ATTEMPT</column>
            <column name="value">10</column>
        </insert>

    </changeSet>

</databaseChangeLog>